# 事务处理
+ 基本描述：事务是一系列SQL操作的序列，是数据库操作的最小逻辑工作单元。
+ 特点(ACID)
	1. 原子性(Atomicity)
	2. 一致性(Consistency)
	3. 隔离性(Isolation)
	4. 持久性(Durability)
---
+ 并发控制技术(Concurrent)
	+ 优点
		+ 提高系统资源利用率。
		+ 缩短事务响应时间。
	+ 潜在问题(数据不一致问题)
		+ 丢失更新(Lost Update)
		+ 读“脏”数据(Dirty Read)
		+ 不可重复读(Non-Repeatable Read)
	+ 解决方式-加锁
		+ 排它锁(Exclusive Locck)(写锁)(X锁)
		+ 共享锁(Share Lock)(读锁)(S锁)
	+ 三级封锁协议
		1. 一级封锁协议：
		任一事务在修改数据之前必须先对数据加上X锁，直到事务结束才能释放。
		*解决丢失更新问题。
		2. 二级封锁协议：
		(1)一级封锁协议
		(2)任一事务在读取数据之前必须先对数据加上S锁，读完即可释放释放。
		*解决丢失更新和读“脏”数据问题。
		3. 三级封锁协议：
		(1)一级封锁协议
		(2)任一事务在读取数据之前必须先对数据加上S锁，直到事务结束才能释放。
		*解决丢失更新、读“脏”数据和不可重复读问题。
	+ 加锁策略
		+ 活锁：
		(1)事务长时间或永久等待
		(2)策略：先到先得策略和优先级策略
		+ 死锁：
		(1)两个事务分别等待各自占有的资源
		(2)策略：预防死锁和解决死锁
			+ 预防死锁：一次封锁法和顺序封锁法
			+ 解决死锁：超时法和等待图法
	+ 并发调度的可串行性：两段封锁协议(加锁和释放锁串行进行)。
	+ 多粒度封锁
		+ 封锁粒度：封锁对象的规模
		+ 封锁粒度越大则封锁代价越小,并发度也越小;封锁粒度越小则封锁代价越大,并发度也越大
	+ 意向锁
		+ 意向共享锁(Intent Share Lock)(IS)
		+ 意向排他锁(Intent Exclusive Lock)(IX)
		+ 共享意向排他锁(Share Intent Share Lock)(SIX)
---
+ 数据库恢复技术(Recover)
	+ 原理：
	(1)建立冗余数据
	(2)根据冗余数据恢复数据库
	+ 实现方法
	(1)数据库转储法
	(2)日志文件法